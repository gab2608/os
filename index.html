<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Mon OS Web</title>
<style>
  /* --- Style du bureau --- */
  body, html {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    font-family: monospace;
    background: linear-gradient(to bottom, #4b6cb7, #182848);
    overflow: hidden;
  }

  #desktop {
    width: 100%;
    height: 100%;
    position: relative;
  }

  /* --- Icônes --- */
  .icon {
    width: 80px;
    text-align: center;
    color: white;
    position: absolute;
    cursor: pointer;
    user-select: none;
  }

  .icon img {
    width: 64px;
    height: 64px;
  }

  /* --- Barre des tâches --- */
  #taskbar {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 40px;
    background: rgba(0,0,0,0.7);
    display: flex;
    align-items: center;
    padding: 0 10px;
    box-sizing: border-box;
  }

  /* --- Fenêtres --- */
  .window {
    position: absolute;
    width: 400px;
    height: 300px;
    background: #222;
    border: 2px solid #555;
    border-radius: 6px;
    color: white;
    display: none;
    flex-direction: column;
    z-index: 10;
  }

  .window-header {
    background: #555;
    padding: 5px;
    cursor: move;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .window-body {
    flex: 1;
    padding: 5px;
    overflow: auto;
  }

  .close-btn {
    background: red;
    border: none;
    width: 20px;
    height: 20px;
    border-radius: 3px;
    color: white;
    cursor: pointer;
  }

  /* --- Terminal --- */
  #terminal {
    background: black;
    color: #0f0;
    font-family: monospace;
    height: 100%;
    overflow-y: auto;
    padding: 5px;
    box-sizing: border-box;
  }

  #terminal-input {
    width: 100%;
    border: none;
    background: black;
    color: #0f0;
    font-family: monospace;
    outline: none;
  }
</style>
</head>
<body>
<div id="desktop">
  <!-- Icône Terminal -->
  <div class="icon" style="top:20px; left:20px;" onclick="openWindow('win-terminal')">
    <img src="https://img.icons8.com/ios-filled/50/ffffff/console.png"/>
    <div>Terminal</div>
  </div>

  <!-- Fenêtre Terminal -->
  <div id="win-terminal" class="window">
    <div class="window-header">
      <span>Terminal</span>
      <button class="close-btn" onclick="closeWindow('win-terminal')">X</button>
    </div>
    <div class="window-body">
      <div id="terminal"></div>
      <input type="text" id="terminal-input" placeholder="Tapez une commande...">
    </div>
  </div>
  
  <!-- Barre des tâches -->
  <div id="taskbar">
    Mon OS Web
  </div>
</div>

<script>
  // --- Gestion fenêtres ---
  function openWindow(id) {
    const win = document.getElementById(id);
    win.style.display = "flex";
  }

  function closeWindow(id) {
    const win = document.getElementById(id);
    win.style.display = "none";
  }

  // --- Drag and Drop simple ---
  const windows = document.getElementsByClassName("window");
  Array.from(windows).forEach(win => {
    const header = win.querySelector(".window-header");
    let offsetX, offsetY, dragging = false;

    header.addEventListener("mousedown", e => {
      dragging = true;
      offsetX = e.clientX - win.offsetLeft;
      offsetY = e.clientY - win.offsetTop;
    });

    document.addEventListener("mouseup", e => dragging = false);
    document.addEventListener("mousemove", e => {
      if(dragging) {
        win.style.left = (e.clientX - offsetX) + "px";
        win.style.top = (e.clientY - offsetY) + "px";
      }
    });
  });

  // --- Terminal ---
  const term = document.getElementById("terminal");
  const input = document.getElementById("terminal-input");

  const commands = {
    help: "Commandes disponibles : help, echo, clear",
    clear: () => { term.innerHTML = ""; return ""; }
  };

  input.addEventListener("keydown", e => {
    if(e.key === "Enter") {
      const cmd = input.value.trim();
      let output = "";
      if(cmd === "") output = "";
      else if(commands[cmd]) {
        output = typeof commands[cmd] === "function" ? commands[cmd]() : commands[cmd];
      } else if(cmd.startsWith("echo ")) {
        output = cmd.substring(5);
      } else {
        output = "Commande inconnue : " + cmd;
      }
      term.innerHTML += "&gt; " + cmd + "<br>" + output + "<br>";
      term.scrollTop = term.scrollHeight;
      input.value = "";
    }
  });
</script>
</body>
</html>
