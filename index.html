<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Envoyer Notification</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body { font-family: 'Segoe UI', sans-serif; background:#f5f5f5; padding:1em; }
  .container { max-width:500px; margin:auto; }
</style>
</head>
<body>
<div class="container">
  <h3>Envoyer Notification</h3>
  <div class="mb-2">
    <input type="text" id="content" class="form-control" placeholder="Texte">
  </div>
  <div class="mb-2">
    <input type="text" id="image" class="form-control" placeholder="URL image (optionnel)">
  </div>
  <div class="mb-2">
    <input type="text" id="music" class="form-control" placeholder="Titre musique (optionnel)">
  </div>
  <button id="sendBtn" class="btn btn-primary w-100">Envoyer</button>
</div>

<script>
const supabaseUrl = 'https://<https://mymmjduelbpownsqdzgu.supabase.co>';
const supabaseKey = '<eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im15bW1qZHVlbGJwb3duc3Fkemd1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIzNjQ4OTcsImV4cCI6MjA3Nzk0MDg5N30.qNPmhC3gwJUb7rziwniPK33fjMEMEdvw-pa0EI1yju8>';
const supabase = supabase.createClient(supabaseUrl, supabaseKey);

document.getElementById('sendBtn').onclick = async () => {
  const content = document.getElementById('content').value;
  const image = document.getElementById('image').value;
  const music = document.getElementById('music').value;

  if(!content && !image && !music) return alert("Rien à envoyer!");

  const { data, error } = await supabase.from('notifications').insert([
    { content, image_url: image || null, music_title: music || null }
  ]);

  if(error) alert(error.message);
  else { 
    alert("Envoyé !");
    document.getElementById('content').value = '';
    document.getElementById('image').value = '';
    document.getElementById('music').value = '';
  }
};
</script>
</body>
</html>
